#include<stdio.h>
#include<string.h>
#include<stdlib.h>


#define MAXFILES 10

struct dir
{
    char dname[10],file_name[MAXFILES][10];
    int file_count;
};

typedef struct dir DIR;
void takeFileName(char *fname)
{
    
    printf("Enter the file name:");
    scanf("%s",fname);
    
}

void createFile(DIR *d)
{
    char fname[10];
    if(d->file_count >= MAXFILES){
        printf("Directory Full\n");
        return;
    }
     takeFileName(fname);
    for(int i=0;i<d->file_count;i++)
    {
        if(strcmp(d->file_name[i],fname)==0)
        {
            printf("File %s already exists\n",fname);
            return;
        }
       
    }
     strcpy(d->file_name[d->file_count], fname);
       d->file_count++;
    printf("File '%s' created successfully.\n", fname);
}

void deleteFile(DIR *d)
{

   char fname[10];
    if(d->file_count ==0)
    {
        printf("No Files to delete\n");
        return;
    }
    takeFileName(fname);
    for(int i=0;i<d->file_count;i++)
    {
        if(strcmp(d->file_name[i], fname)==0)
        {
            printf("File %s deleted\n",fname);
            
            strcpy(d->file_name[i],d->file_name[d->file_count-1]);
            d->file_count--;
            return;
        }
    }
    printf("File not found");
}

void searchFile(DIR *d)
{
    char fname[10];
    if(d->file_count==0){
        printf("No files\n");
        return;
    }
     takeFileName(fname);
    for(int i=0;i<d->file_count;i++)
    {
        if(strcmp(d->file_name[i], fname)==0)
        {
            printf("File found at position %d",i+1);
            return;
        }
    }
    printf("File not found\n");
}

void displayFiles(DIR *d) {
    if (d->file_count == 0) {
        printf("Directory is empty.\n");
        return;
    }

    printf("Files in directory '%s':\n", d->dname);
    for (int i = 0; i < d->file_count; i++) {
        printf("%d. %s\n", i + 1, d->file_name[i]);
    }
}

int main() {
    DIR dir;
    dir.file_count = 0;

    printf("Enter directory name: ");
    scanf("%s", dir.dname);
    int choice;
    while (1) {
      printf("1. Create File\n");
        printf("2. Delete File\n");
        printf("3. Search File\n");
        printf("4. Display Files\n");
        printf("5. Exit\n");
        printf("Enter your choice: ");
        scanf("%d", &choice);
        switch (choice) {
            case 1: createFile(&dir); break;
            case 2: deleteFile(&dir); break;
            case 3: searchFile(&dir); break;
            case 4: displayFiles(&dir); break;
            case 5:exit(0);
            default: printf("Invalid choice. Try again.\n");
        }
    }
    return 0;
}